# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Development Commands

### Environment Setup
```bash
# Initialize project (already done)
uv init

# Install dependencies
uv add <package_name>

# Run the application
uv run python run_web.py

# For FastAPI development with custom settings
uv run uvicorn run_web:app --host 0.0.0.0 --port 5001 --reload
```

### Testing
```bash
# Run all tests (when implemented)
uv run pytest

# Run specific test file
uv run pytest tests/test_specific.py

# Run with coverage
uv run pytest --cov=src
```

### Development Workflow
```bash
# Activate virtual environment
source .venv/bin/activate

# Add new dependencies
uv add <package_name>

# Update dependencies
uv sync

# Run linting (when configured)
uv run ruff check .
uv run ruff format .
```

## Project Architecture

This is a Python project using FastAPI framework, managed with uv package manager. The project follows a UAT-compliant development approach.

### Current Structure
- `run_web.py`: Application entry point running on port 5001
- `api/`: Backend API structure
  - `routers/`: Route definitions
    - `home.py`: Home page routes and API endpoints
    - `pricing.py`: Pricing management routes
    - `products.py`: Products page routes
  - `urls.py`: URL routing configuration
- `db/`: Database layer
  - `pricing_repository.py`: Pricing data access layer with DuckDB
- `frontend/`: Frontend templates and static files
  - `base.html`: Base template with responsive layout
  - `home/`: Home page assets
    - `index.html`: Dashboard page template
    - `js/home.js`: Interactive JavaScript functionality
  - `pricing/`: Pricing management assets
    - `index.html`: Pricing management page
    - `js/pricing.js`: Pricing page interactions
  - `products/`: Products page assets
    - `index.html`: Products showcase page
    - `js/products.js`: Products page interactions
- `pyproject.toml`: Project configuration and dependencies
- `.CLAUDE.md`: This file with development guidelines

### Application Features
- **Responsive Web Interface**: Mobile-first design with collapsible sidebar
- **Dashboard**: Real-time statistics and performance metrics
- **REST API**: FastAPI backend with automatic OpenAPI documentation
- **Modern UI**: Tailwind CSS with shadcn-inspired design patterns
- **Interactive Components**: Vanilla JavaScript for dynamic user interactions

### Technology Stack
- **Language**: Python 3.13+
- **Framework**: FastAPI
- **Database**: DuckDB (embedded, serverless)
- **Package Manager**: uv
- **Testing**: pytest (to be implemented)
- **Linting**: ruff (to be implemented)

## UAT Compliance Requirements

This project follows User Acceptance Testing (UAT) compliance principles as defined in the UAT Process Framework:

### Development Standards
1. **Business Requirement Validation**: Ensure all features meet specified business needs
2. **End-User Validation**: Design features with real user scenarios in mind
3. **Scenario-Based Testing**: Create realistic user journey tests for all functionality
4. **Acceptance Criteria Verification**: Define and test clear acceptance criteria for each feature
5. **Documentation**: Maintain comprehensive documentation for test scenarios and results

### Code Quality
1. **Clean Code**: Maintain readable code with clear comments and proper structure
2. **Error Handling**: Implement user-friendly error messages and validation
3. **Performance**: Optimize for user experience and responsiveness
4. **Security**: Follow security best practices to protect user data
5. **Accessibility**: Ensure code follows accessibility standards for inclusive design

### UAT Implementation
1. **Phase 1 - Planning**: Define UAT scope, test scenarios, and acceptance criteria before development
2. **Phase 2 - Execution**: Conduct scenario-based testing with real users during development
3. **Phase 3 - Evaluation**: Review results against acceptance criteria and gather feedback
4. **Phase 4 - Release**: Obtain formal sign-off from stakeholders before production deployment

### Testing Requirements
1. **Unit Tests**: Cover all critical functionality with appropriate test coverage
2. **Integration Tests**: Ensure API endpoints and components work together seamlessly
3. **UAT Scenarios**: Include realistic user journey tests that simulate actual usage
4. **Performance Testing**: Verify the application meets performance benchmarks
5. **Regression Testing**: Ensure existing functionality remains intact after changes

### FastAPI Development Best Practices
- Use Pydantic models for data validation and serialization
- Implement proper HTTP status codes for all endpoints
- Include comprehensive OpenAPI documentation for all API routes
- Handle errors gracefully with appropriate error responses
- Follow RESTful API design principles
- Implement proper authentication and authorization where needed

## Application-Specific Guidelines

### Frontend Development
- Use responsive design principles with Tailwind CSS
- Implement accessible navigation and interactive components
- Ensure cross-browser compatibility and mobile optimization
- Use semantic HTML5 elements for better accessibility
- Implement proper error handling and user feedback mechanisms

### JavaScript Development Standards
- **Vanilla JavaScript Only**: Use native JavaScript without frameworks or libraries
- **Component-Based Architecture**: Break functionality into small, reusable components
- **File Organization**: Each component should have its own JavaScript file
- **Import Pattern**: Load scripts directly in HTML templates using `<script src="...">` tags
- **UAT Compliance**: Follow User Acceptance Testing principles for all JavaScript components
- **Modular Design**: Create focused, single-responsibility components
- **Error Handling**: Implement robust error handling with user-friendly messages

#### Component Structure Example (Pricing Page):
```html
<!-- In pricing/index.html -->
<script src="/static/pricing/js/pricing.js"></script>
<script src="/static/pricing/js/components/provider-modal.js"></script>
<script src="/static/pricing/js/components/offer-modal.js"></script>
<script src="/static/pricing/js/components/data-table.js"></script>
<script src="/static/pricing/js/components/notifications.js"></script>
```

#### Component Guidelines:
1. **Main File**: Page-specific logic (e.g., `pricing.js`)
2. **Modal Components**: Separate files for different modals (e.g., `provider-modal.js`)
3. **Data Components**: Data handling and API interactions (e.g., `data-table.js`)
4. **Utility Components**: Reusable functionality (e.g., `notifications.js`)
5. **Component Size**: Keep files under 200 lines when possible
6. **Clear Naming**: Use descriptive names that indicate component purpose

### API Development
- Follow FastAPI conventions for route organization
- Use proper HTTP methods (GET, POST, PUT, DELETE) appropriately
- Implement proper request/response models with Pydantic
- Include comprehensive error handling and validation
- Use appropriate status codes for different response scenarios
- Implement rate limiting and security measures as needed

### Development Notes
- Application runs on port 5001 by default
- Uses modern Python 3.13+ with FastAPI framework
- Frontend uses Tailwind CSS with shadcn-inspired design patterns
- Interactive components use vanilla JavaScript (no frontend framework)
- Follow the UAT compliance framework outlined in README.md
- Test framework and linting tools should be configured as the project grows